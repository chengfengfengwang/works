<!DOCTYPE html>
<html lang="en">

<head>
    <title>小米手机</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="./css/normalize.css" rel="stylesheet">
    <link href="./css/style.css" rel="stylesheet">
    <style>
        .screen-1__heading,
        .screen-1__phone,
        .screen-1__phone-shadow,
        .screen-2__heading__title,
        .screen-2__heading__content,
        .screen-2__phone,
        .screen-3__heading__title,
        .screen-3__heading__content,
        .screen-3__phone,
        .screen-4__heading__title,
        .screen-4__heading__content,
        .screen-4__phone-item,
        .screen-5__heading__title,
        .screen-5__heading__content {
            transition: all 1s
        }

        .up_animate_init {
            opacity: 0;
            transform: translate(0, 100%)
        }

        .down_animate_init {
            opacity: 0;
            transform: translate(0, -100%)
        }

        .animate_done {
            transform: none;
            opacity: 1
        }

        body {
            padding-top: 39px
        }

       
    </style>
</head>

<body>
    <header>
        <!-- <a href="javascriot:;" class="header__logo">小米手机</a> -->
        <nav class="header__nav">
            <a href="#part-1" class="header__nav-item header__color-change">外观</a>
            <a href="#part-2" class="header__nav-item">配置</a>
            <a href="#part-3" class="header__nav-item">型号</a>
            <a href="#part-4" class="header__nav-item">说明</a>
            <a href="#part-5" class="header__nav-item">其他产品</a>
            <a href="#part-6" class="header__nav-item  header__nav-item-custom-button">立即购买</a>
            <div class="header__nav-item_tip"></div>
        </nav>
    </header>

    <section class="screen-1" id="part-1">
        <div class="screen-1__wrap">
            <p class="screen-1__heading up_animate_init">
                <span class="screen-1__heading__part-1">小米手机</span>
                <span class="screen-1__heading__part-2"></span>
            </p>
        </div>
        <div class="screen-1__phone down_animate_init"></div>
        <div class="screen-1__phone-shadow up_animate_init"></div>
    </section>
    <section class="screen-2" id="part-2">
        <div class="screen-2__wrap">
            <div class="screen-2__heading__title">设计优美</div>
            <div class="screen-2__heading__content">
                采用受欢迎的设计，让它更加出色。</br>
                款式小巧、轻便手感更舒适。绚丽高清的显示屏，整个外观显得格外精致。
            </div>
            <div class="screen-2__phone">
                <div class="screen-2__phone-point_item  screen-2__phone-point_item-1">超薄机身</div>
                <div class="screen-2__phone-point_item  screen-2__phone-point_item-2">高清摄像</div>
                <div class="screen-2__phone-point_item  screen-2__phone-point_item-3">大屏显示</div>
            </div>
        </div>
    </section>
    <section class="screen-3" id="part-3">
        <div class="screen-3__wrap">
            <div class="screen-3__heading__title">外形小巧，功能强大的手机</div>
            <div class="screen-3__heading__content">
                采用受欢迎的设计，让它更加出色。 </br>
                款式小巧、轻便手感更舒适。绚丽高清的显示屏，整个外观显得格外精致。
            </div>
            <div class="screen-3__phone"></div>
            <div class="screen-3__phone-features">
                <div class="screen-3__phone-features-item">
                    <p class="screen-3__phone-features-item-number">5.7</p>
                    <p>英寸大屏幕</p>
                </div>
                <div class="screen-3__phone-features-item">
                    <p class="screen-3__phone-features-item-number">1200</p>
                    <p>万像素</p>
                </div>
                <div class="screen-3__phone-features-item">
                    <p class="screen-3__phone-features-item-number">3D</p>
                    <p>touch</p>
                </div>
                <div class="screen-3__phone-features-item">
                    <p class="screen-3__phone-features-item-number">A9</p>
                    <p>处理器</p>
                </div>
            </div>
        </div>
    </section>
    <section class="screen-4" id="part-4">
        <div class="screen-4__wrap">
            <div class="screen-4__heading__title">丰富的手机型号</div>
            <div class="screen-4__heading__content">
                找到适合你的手机
            </div>
            <div class="screen-4__phone">
                <div class="screen-4__phone-item  screen-4__phone-item_1 screen-4__phone-item_1__animate_init">
                    <div class="screen-4__phone-item_name">美酒红</div>
                    <div class="screen-4__phone-item_feature">16G/32G/64G</div>
                </div>
                <div class="screen-4__phone-item  screen-4__phone-item_2 screen-4__phone-item_2__animate_init">
                    <div class="screen-4__phone-item_name">土豪金</div>
                    <div class="screen-4__phone-item_feature">16G/32G/64G</div>
                </div>
                <div class="screen-4__phone-item  screen-4__phone-item_3 screen-4__phone-item_3__animate_init">
                    <div class="screen-4__phone-item_name">太空灰</div>
                    <div class="screen-4__phone-item_feature">16G/32G/64G</div>
                </div>
                <div class="screen-4__phone-item  screen-4__phone-item_4 screen-4__phone-item_4__animate_init">
                    <div class="screen-4__phone-item_name">绅士黑</div>
                    <div class="screen-4__phone-item_feature">16G/32G/64G</div>
                </div>
            </div>
        </div>
    </section>
    <!-- <section class="screen-5" id="part-5">
        <div class="screen-5__wrap">
            <div class="screen-5__heading__title">游戏、学习、拍照、有这一部就够了</div>
            <div class="screen-5__heading__content">
                看视频、拍摄高清视频与照片、视频聊天、一机多功能，让您生活更丰富精彩。
            </div>
        </div>
        <div class="screen-5__photo"></div>
    </section> -->

    <section class="screen-5">
        <div class="screen-5_content">
            <h1>小米6</h1>
            <h1>变焦双摄，拍人更美</h1>
            <p>骁龙835 旗舰处理器， 6GB 大内存 |  5.15" 护眼屏 | 四曲面陶瓷 / 玻璃</p>
        </div>
    </section>
    <section class="screen-6">
        <video src="http://v.mifile.cn/b2c-mimall-media/acdf959034bad716e851ec2f22483661.mp4" preload loop>
        </video>
        <div class="screen-6_content">
            <h1>流光溢彩 温润如玉</h1>
            <p>梦幻般的四曲面玻璃机身与不锈钢高亮边框设计</p>
        </div>
    </section>
    <section class="screen-6">
        <div class="carousel">
            <div class="img-list">
                <img src="img/carousel0.jpg" alt="">
                <img src="img/carousel1.jpg" alt="">
                <img src="img/carousel2.jpg" alt="">
                <img src="img/carousel3.jpg" alt="">
                <img src="img/carousel4.jpg" alt="">
            </div>
            <span class="btn-pre"></span>
            <span class="btn-next"></span>
        </div>
    </section>
    <section class="screen-7" id="part-6">
        <div class="screen-7__wrap">
            <a href="javascript:;" class="screen-7__button-buy">立即购买</a>
        </div>
        <div class="screen-7__bg"></div>
    </section>
    <footer>
        <div class="footer__copyright">© 2017 chengfengwang</div>
    </footer>
    <script src="js/jquery-3.2.1.min.js"></script>
    <script>
        var index = 0;
        function moveNavitem(index) {
            $('.header__nav-item_tip').css('left', index * 100 + 20);
            $('.header__nav-item').removeClass('header__color-change');
            $('.header__nav-item').eq(index).addClass('header__color-change');
        }

        $('.header__nav-item').not('.header__nav-item-custom-button').on('mouseenter', function () {
            $('.header__nav-item_tip').css('left', $(this).index() * 100 + 20)
        })
        $('.header__nav-item').on('mouseleave', function () {
            $('.header__nav-item_tip').css('left', index * 100 + 20)     //移动导航栏的光标
        })
        var upAnimateArr = [
            '.screen-2__heading__content', '.screen-2__phone',
            '.screen-3__heading__content', '.screen-3__phone',
            '.screen-4__heading__content',
            '.screen-5__heading__content'];
        var downAnimateArr = ['.screen-2__heading__title',
            '.screen-3__heading__title',
            '.screen-4__heading__title',
            '.screen-5__heading__title']            //初始化动画开始前的动作

        for (var i = 0; i < upAnimateArr.length; i++) {
            $(upAnimateArr[i]).addClass('up_animate_init')
        };
        for (var i = 0; i < downAnimateArr.length; i++) {
            $(downAnimateArr[i]).addClass('down_animate_init')
        }

        setTimeout(function () {
            $('.screen-1__heading').addClass('animate_done');
            $('.screen-1__phone').addClass('animate_done');
            $('.screen-1__phone-shadow').addClass('animate_done');
        }, 1000)                             //第一屏动画
        $(window).on('scroll', function () {
            var $scrollTop = $(window).scrollTop();
            if ($scrollTop < 20) {
                $('header').removeClass('header__bgcolor-change')
            }
            if ($scrollTop > 20) {
                $('header').addClass('header__bgcolor-change')
            }
            if (($scrollTop) < 740) {
                index = 0;
                moveNavitem(index)
            }

            if (($scrollTop) > 740) {
                index = 1;
                moveNavitem(index)

                $('.screen-2__heading__title').addClass('animate_done');
                $('.screen-2__heading__content').addClass('animate_done');
                $('.screen-2__phone').addClass('animate_done');
            }
            if ($scrollTop > 1540) {
                index = 2;
                moveNavitem(index)

                $('.screen-3__heading__content').addClass('animate_done');
                $('.screen-3__phone').addClass('animate_done');
                $('.screen-3__heading__title').addClass('animate_done');
                $('.screen-3__phone-features').addClass('animate_done');
            }
            if ($scrollTop > 2340) {
                index = 3;
                moveNavitem(index)

                $('.screen-4__heading__title').addClass('animate_done');
                $('.screen-4__heading__content').addClass('animate_done');
                $('.screen-4__phone-item').addClass('animate_done');
            }
            if ($scrollTop > 3140) {
                index = 4;
                moveNavitem(index)
                $('.screen-5__heading__title').addClass('animate_done');
                $('.screen-5__heading__content').addClass('animate_done');
                $('.screen-5__photo').addClass('animate_done');
            }
            if(isVisible($('.screen-6'))){
                //$('.screen-6').find($('video'))
                document.querySelector('.screen-6 video').play()
            }
        })
            /* 轮播 */
            function Carousel() {
                var $carousel = $('.carousel'),
                    $imgList = $('.img-list'),
                    $imgWidth = $carousel.width(),
                    $imgNum = $imgList.children().length,
                    $btnNext = $('.btn-next'),
                    $btnPre = $('.btn-pre'),
                    slideIndex = 1;
                $imgList.width(($imgWidth + 140) * $imgNum + 70)
                $imgList.css('left', -$imgWidth)
                var animated = false;
                $btnNext.on('click', function () {
                    playNext()
                })
                $btnPre.on('click', function () {
                    playPre()
                })
                function playNext() {
                    if (!animated) {
                        animated = true;
                        $imgList.animate({
                            left: '-=' + $imgWidth
                        }, 500, function () {
                            slideIndex += 1
                            if (slideIndex >= $imgNum - 1) {
                                $btnNext.addClass('hide')
                            }
                            $btnPre.removeClass('hide')
                            animated = false
                        })
                    }
                }
                function playPre() {
                    $imgList.animate({
                        left: '+=' + $imgWidth
                    }, 500, function () {
                        slideIndex -= 1;
                        if (slideIndex === 0) {
                            $btnPre.addClass('hide')
                        }
                        $btnNext.removeClass('hide')
                    })
                }
            };
            Carousel()
            /* 轮播 */
            function isVisible(node) {
                var curWindowHeight = $(window).height(),
                    nodeOffsetTop = node.offset().top,
                    windowScrollTop = $(window).scrollTop();
                if (nodeOffsetTop < (windowScrollTop + curWindowHeight) && windowScrollTop < (nodeOffsetTop + node.height())) {
                    return true
                } else {
                    return false
                }
            }
    </script>
</body>

</html>
